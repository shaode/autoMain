/**
 * Created by wb-xiongsongsong on 14-2-14.
 */
var fs = require('fs')

//入口
exports.start = function *() {
    this.moduleCache = {}
    return yield exports.read
}

//读取文件
exports.read = function *(next) {
    if (yield exports.isFile) {
        return fs.createReadStream(this.fileName)
    } else {
        return '404 Not Found'
    }
}

//替换文件define
exports.replace = function *() {

}

exports.isFile = function (callback) {
    fs.lstat(this.fileName, function (err, stat) {
        callback(null, stat && stat.isFile())
    })
}

